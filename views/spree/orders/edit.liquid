{% content_for head %}
<script src="/assets/cart.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="/assets/cart.css">
{% end_content_for %}

<div class="row">
    <ul class="breadcrumb">
        <li><a href="/">Home</a><span class="divider">/</span></li>
        <li><a href="{{ update_cart | url_helper }}">Shopping Cart</a></li>
    </ul>
    <div class="span12">
        <h1>Shopping Cart</h1>
        {% error_messages_for order %}
        {% form_for order as:post  url_helper:update_cart_path, method:put, html:"{ id:'basket', class:'my-class'}" %}
        <div class="cart-info">
            <table class="table">
                <thead>
                <tr>
                    <td class="remove">Remove</td>
                    <td class="image">Image</td>
                    <td class="name">Product Name</td>
                    <td class="quantity">Quantity</td>
                    <td class="price">Unit Price</td>
                    <td class="total">Total</td>
                </tr>
                </thead>
                <tbody>
                {% for line_item in order.line_items %}
                <tr>
                    <td class="remove"><input value="{{ forloop.index0 }}" type="checkbox"></td>
                    <td class="image">
                        <a href="{{ 'product_path' | url_helper: line_item.variant.product }}">
                            <img src="{{line_item.variant.product.small_image_url}}" alt="{{line_item.variant.product.name}}" title="{{line_item.variant.product.name}}">
                        </a>
                    </td>
                    <td class="name">
                        <a href="{{ 'product_path' | url_helper: line_item.variant.product }}">{{line_item.variant.product.name}}</a>
                        <div>{{ line_item.variant | line_item_description }}</div>
                        <div>{{ line_item.variant.options_text }}</div>
                    </td>
                    <td class="quantity">
                        <input type="hidden" value="{{line_item.id}}" name="order[line_items_attributes][{{forloop.index0}}][id]"
                               id="order_line_items_attributes_{{ forloop.index0 }}_id">
                        <input type="text" value="{{line_item.quantity}}" size="3" name="order[line_items_attributes][{{ forloop.index0 }}][quantity]"
                               min="0" id="order_line_items_attributes_{{ forloop.index0 }}_quantity" class="line_item_quantity">
                    </td>
                    <td class="price">{{ line_item.single_money }}</td>
                    <td class="total">{{ line_item.display_amount }}</td>
                </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>
        {% endform_for %}

        <div class="cart-total">
            <table>
                <tbody>
                <tr>
                    <td colspan="5"></td>
                    <td class="right"><b>Sub-Total:</b></td>
                    <td class="right">{{ order.display_item_total }}</td>
                </tr>
                <tr>
                    <td colspan="5"></td>
                    <td class="right"><b>Total:</b></td>
                    <td class="right">{{order.display_total}}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="buttons">
            <div class="left"><a id="submit_busket_form" class="button"><span>Update</span></a></div>
            <div class="right">
                <a href="/checkout" class="button"><span>Checkout</span></a>
            </div>
            <div class="center">
                <a href="/products" class="button"><span>Continue Shopping</span></a>
            </div>
        </div>

    </div>
</div>